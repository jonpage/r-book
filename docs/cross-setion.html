<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Data Analysis and Visualization</title>
  <meta name="description" content="This is a course on using R focused on data analysis and visualization through case studies.">
  <meta name="generator" content="bookdown 0.4 and GitBook 2.6.7">

  <meta property="og:title" content="R for Data Analysis and Visualization" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a course on using R focused on data analysis and visualization through case studies." />
  <meta name="github-repo" content="jonpage/r-course" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Data Analysis and Visualization" />
  
  <meta name="twitter:description" content="This is a course on using R focused on data analysis and visualization through case studies." />
  

<meta name="author" content="Jonathan Page">


<meta name="date" content="2017-11-12">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="log.html">
<link rel="next" href="time-series.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #dddddd; }
td.sourceCode { padding-left: 5px; }
code > span.kw { font-weight: bold; } /* Keyword */
code > span.dt { color: #800000; } /* DataType */
code > span.dv { color: #0000ff; } /* DecVal */
code > span.bn { color: #0000ff; } /* BaseN */
code > span.fl { color: #800080; } /* Float */
code > span.ch { color: #ff00ff; } /* Char */
code > span.st { color: #dd0000; } /* String */
code > span.co { color: #808080; font-style: italic; } /* Comment */
code > span.al { color: #00ff00; font-weight: bold; } /* Alert */
code > span.fu { color: #000080; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #ff0000; font-weight: bold; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #ff00ff; } /* SpecialChar */
code > span.vs { color: #dd0000; } /* VerbatimString */
code > span.ss { color: #dd0000; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { } /* Variable */
code > span.cf { } /* ControlFlow */
code > span.op { } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { font-weight: bold; } /* Preprocessor */
code > span.at { } /* Attribute */
code > span.do { color: #808080; font-style: italic; } /* Documentation */
code > span.an { color: #808080; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #808080; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #808080; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Data Analysis and Visualization</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Syllabus</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#office-hours"><i class="fa fa-check"></i>Office Hours</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#student-learning-objectives"><i class="fa fa-check"></i>Student Learning Objectives</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#resources"><i class="fa fa-check"></i>Resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#required"><i class="fa fa-check"></i>Required</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#recommended"><i class="fa fa-check"></i>Recommended:</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#course-requirements"><i class="fa fa-check"></i>Course Requirements</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#weekly-assignments-30"><i class="fa fa-check"></i>Weekly assignments (30%)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#individual-project"><i class="fa fa-check"></i>Individual Project</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#project-assignments-30"><i class="fa fa-check"></i>Project assignments (30%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#project-proposal-presentation-5"><i class="fa fa-check"></i>Project proposal presentation (5%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#final-project-20"><i class="fa fa-check"></i>Final project (20%)</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#final-project-presentation-participation-15"><i class="fa fa-check"></i>Final project presentation participation (15%)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-1"><i class="fa fa-check"></i>Week 1</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-2"><i class="fa fa-check"></i>Week 2</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-3"><i class="fa fa-check"></i>Week 3</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-4"><i class="fa fa-check"></i>Week 4</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-5"><i class="fa fa-check"></i>Week 5</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-6"><i class="fa fa-check"></i>Week 6</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-7"><i class="fa fa-check"></i>Week 7</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-8"><i class="fa fa-check"></i>Week 8</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-9"><i class="fa fa-check"></i>Week 9</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-10"><i class="fa fa-check"></i>Week 10</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-11"><i class="fa fa-check"></i>Week 11</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-12"><i class="fa fa-check"></i>Week 12</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-13"><i class="fa fa-check"></i>Week 13</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-14"><i class="fa fa-check"></i>Week 14</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-15"><i class="fa fa-check"></i>Week 15</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#week-16"><i class="fa fa-check"></i>Week 16</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#statistics"><i class="fa fa-check"></i>Statistics</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#visualization"><i class="fa fa-check"></i>Visualization</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#courses"><i class="fa fa-check"></i>Courses</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#books"><i class="fa fa-check"></i>Books</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#papers"><i class="fa fa-check"></i>Papers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html"><i class="fa fa-check"></i>Weekly Assignments</a><ul>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html#creating-the-r-markdown-files"><i class="fa fa-check"></i>Creating the R Markdown files</a></li>
<li class="chapter" data-level="" data-path="weekly-assignments.html"><a href="weekly-assignments.html#submitting-your-assignment"><i class="fa fa-check"></i>Submitting your assignment</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html"><i class="fa fa-check"></i>Individual Project</a><ul>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#project-assignments"><i class="fa fa-check"></i>Project assignments</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#project-proposal-presentation"><i class="fa fa-check"></i>Project proposal presentation</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#final-project-rmarkdown"><i class="fa fa-check"></i>Final project RMarkdown</a></li>
<li class="chapter" data-level="" data-path="individual-project-1.html"><a href="individual-project-1.html#final-project-presentation-participation"><i class="fa fa-check"></i>Final project presentation participation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html"><i class="fa fa-check"></i>Final Project Rubric</a><ul>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#section-introduction-10"><i class="fa fa-check"></i>Section: Introduction (10%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#section-data-10"><i class="fa fa-check"></i>Section: Data (10%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#section-analysis-and-results-30"><i class="fa fa-check"></i>Section: Analysis and Results (30%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#section-conclusion-10"><i class="fa fa-check"></i>Section: Conclusion (10%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#general-organization-10"><i class="fa fa-check"></i>General: Organization (10%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#general-grammar-10"><i class="fa fa-check"></i>General: Grammar (10%)</a></li>
<li class="chapter" data-level="" data-path="final-project-rubric.html"><a href="final-project-rubric.html#general-code-20"><i class="fa fa-check"></i>General: Code (20%)</a></li>
</ul></li>
<li class="part"><span><b>I R Tutorials</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R Basics</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#r-markdown"><i class="fa fa-check"></i><b>1.1</b> R Markdown</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#working-with-data-already-loaded-into-r"><i class="fa fa-check"></i><b>1.2</b> Working with data already loaded into R</a><ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#numeric-summaries"><i class="fa fa-check"></i><b>1.2.1</b> Numeric summaries</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#visual-summaries"><i class="fa fa-check"></i><b>1.2.2</b> Visual summaries</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#distribution-plots"><i class="fa fa-check"></i><b>1.2.3</b> Distribution plots</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#assignment"><i class="fa fa-check"></i><b>1.3</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="read-data.html"><a href="read-data.html"><i class="fa fa-check"></i><b>2</b> Reading data</a><ul>
<li class="chapter" data-level="2.1" data-path="read-data.html"><a href="read-data.html#data-source"><i class="fa fa-check"></i><b>2.1</b> Data Source:</a></li>
<li class="chapter" data-level="2.2" data-path="read-data.html"><a href="read-data.html#read_csv"><i class="fa fa-check"></i><b>2.2</b> <code>read_csv</code></a></li>
<li class="chapter" data-level="2.3" data-path="read-data.html"><a href="read-data.html#dplyr"><i class="fa fa-check"></i><b>2.3</b> <code>dplyr</code></a></li>
<li class="chapter" data-level="2.4" data-path="read-data.html"><a href="read-data.html#first-look-at-ggplot2"><i class="fa fa-check"></i><b>2.4</b> First Look at <code>ggplot2</code></a></li>
<li class="chapter" data-level="2.5" data-path="read-data.html"><a href="read-data.html#heatmaps"><i class="fa fa-check"></i><b>2.5</b> Heatmaps</a></li>
<li class="chapter" data-level="2.6" data-path="read-data.html"><a href="read-data.html#hexbins"><i class="fa fa-check"></i><b>2.6</b> Hexbins</a></li>
<li class="chapter" data-level="2.7" data-path="read-data.html"><a href="read-data.html#other-topics-from-this-dataset"><i class="fa fa-check"></i><b>2.7</b> Other topics from this dataset</a></li>
<li class="chapter" data-level="2.8" data-path="read-data.html"><a href="read-data.html#assignment-1"><i class="fa fa-check"></i><b>2.8</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html"><i class="fa fa-check"></i><b>3</b> Facets, Bubbles, and Transparency</a><ul>
<li class="chapter" data-level="3.1" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#data"><i class="fa fa-check"></i><b>3.1</b> Data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#importing-non-standard-excel-files"><i class="fa fa-check"></i><b>3.1.1</b> Importing non-standard Excel files</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#facets"><i class="fa fa-check"></i><b>3.2</b> Facets</a></li>
<li class="chapter" data-level="3.3" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#bubbles"><i class="fa fa-check"></i><b>3.3</b> Bubbles</a></li>
<li class="chapter" data-level="3.4" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#transparency"><i class="fa fa-check"></i><b>3.4</b> Transparency</a></li>
<li class="chapter" data-level="3.5" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#facets-1"><i class="fa fa-check"></i><b>3.5</b> Facets</a></li>
<li class="chapter" data-level="3.6" data-path="facets-and-bubbles.html"><a href="facets-and-bubbles.html#assignment-2"><i class="fa fa-check"></i><b>3.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lines.html"><a href="lines.html"><i class="fa fa-check"></i><b>4</b> Lines and Curves</a><ul>
<li class="chapter" data-level="4.1" data-path="lines.html"><a href="lines.html#data-1"><i class="fa fa-check"></i><b>4.1</b> Data</a></li>
<li class="chapter" data-level="4.2" data-path="lines.html"><a href="lines.html#geom_smooth"><i class="fa fa-check"></i><b>4.2</b> geom_smooth</a></li>
<li class="chapter" data-level="4.3" data-path="lines.html"><a href="lines.html#geom_abline"><i class="fa fa-check"></i><b>4.3</b> geom_abline</a></li>
<li class="chapter" data-level="4.4" data-path="lines.html"><a href="lines.html#geom_vline"><i class="fa fa-check"></i><b>4.4</b> geom_vline</a></li>
<li class="chapter" data-level="4.5" data-path="lines.html"><a href="lines.html#hline"><i class="fa fa-check"></i><b>4.5</b> hline</a></li>
<li class="chapter" data-level="4.6" data-path="lines.html"><a href="lines.html#assignment-3"><i class="fa fa-check"></i><b>4.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ggplot-exts.html"><a href="ggplot-exts.html"><i class="fa fa-check"></i><b>5</b> Scatter Plot Matrices and Extensions</a><ul>
<li class="chapter" data-level="5.1" data-path="ggplot-exts.html"><a href="ggplot-exts.html#data-2"><i class="fa fa-check"></i><b>5.1</b> Data</a></li>
<li class="chapter" data-level="5.2" data-path="ggplot-exts.html"><a href="ggplot-exts.html#ggplot2-extensions"><i class="fa fa-check"></i><b>5.2</b> ggplot2 extensions</a></li>
<li class="chapter" data-level="5.3" data-path="ggplot-exts.html"><a href="ggplot-exts.html#ggjoy"><i class="fa fa-check"></i><b>5.3</b> ggjoy</a></li>
<li class="chapter" data-level="5.4" data-path="ggplot-exts.html"><a href="ggplot-exts.html#scatterplot-matrix-ggallyggscatmat"><i class="fa fa-check"></i><b>5.4</b> scatterplot matrix (GGally::ggscatmat)</a></li>
<li class="chapter" data-level="5.5" data-path="ggplot-exts.html"><a href="ggplot-exts.html#assignment-4"><i class="fa fa-check"></i><b>5.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html"><i class="fa fa-check"></i><b>6</b> Boxplots and Violin Plots</a><ul>
<li class="chapter" data-level="6.1" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#data-3"><i class="fa fa-check"></i><b>6.1</b> Data</a></li>
<li class="chapter" data-level="6.2" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#boxplots"><i class="fa fa-check"></i><b>6.2</b> Boxplots</a></li>
<li class="chapter" data-level="6.3" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#violin-plots"><i class="fa fa-check"></i><b>6.3</b> Violin Plots</a></li>
<li class="chapter" data-level="6.4" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#dot-plots"><i class="fa fa-check"></i><b>6.4</b> Dot Plots</a></li>
<li class="chapter" data-level="6.5" data-path="boxplots-and-violins.html"><a href="boxplots-and-violins.html#assignment-5"><i class="fa fa-check"></i><b>6.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="geom-spoke.html"><a href="geom-spoke.html"><i class="fa fa-check"></i><b>7</b> Spatial Visualizations</a><ul>
<li class="chapter" data-level="7.1" data-path="geom-spoke.html"><a href="geom-spoke.html#data-4"><i class="fa fa-check"></i><b>7.1</b> Data</a></li>
<li class="chapter" data-level="7.2" data-path="geom-spoke.html"><a href="geom-spoke.html#geom_spoke"><i class="fa fa-check"></i><b>7.2</b> geom_spoke</a></li>
<li class="chapter" data-level="7.3" data-path="geom-spoke.html"><a href="geom-spoke.html#maps"><i class="fa fa-check"></i><b>7.3</b> maps</a></li>
<li class="chapter" data-level="7.4" data-path="geom-spoke.html"><a href="geom-spoke.html#gganimate"><i class="fa fa-check"></i><b>7.4</b> gganimate</a></li>
<li class="chapter" data-level="7.5" data-path="geom-spoke.html"><a href="geom-spoke.html#glyphs"><i class="fa fa-check"></i><b>7.5</b> glyphs</a></li>
<li class="chapter" data-level="7.6" data-path="geom-spoke.html"><a href="geom-spoke.html#assignment-6"><i class="fa fa-check"></i><b>7.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html"><i class="fa fa-check"></i><b>8</b> geom_area and geom_ribbon</a><ul>
<li class="chapter" data-level="8.1" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#data-5"><i class="fa fa-check"></i><b>8.1</b> Data</a><ul>
<li class="chapter" data-level="8.1.1" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#downloading-a-file-from-the-internet"><i class="fa fa-check"></i><b>8.1.1</b> Downloading a file from the internet</a></li>
<li class="chapter" data-level="8.1.2" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#pairing-down-the-list-of-variables"><i class="fa fa-check"></i><b>8.1.2</b> Pairing down the list of variables</a></li>
<li class="chapter" data-level="8.1.3" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#adding-more-activity-categories"><i class="fa fa-check"></i><b>8.1.3</b> Adding more activity categories</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#geom_area"><i class="fa fa-check"></i><b>8.2</b> geom_area</a></li>
<li class="chapter" data-level="8.3" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#geom_ribbon"><i class="fa fa-check"></i><b>8.3</b> geom_ribbon</a></li>
<li class="chapter" data-level="8.4" data-path="area-and-ribbons.html"><a href="area-and-ribbons.html#assignment-7"><i class="fa fa-check"></i><b>8.4</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="jitter-rug.html"><a href="jitter-rug.html"><i class="fa fa-check"></i><b>9</b> Jitter, Rug, and Aesthetics</a><ul>
<li class="chapter" data-level="9.1" data-path="jitter-rug.html"><a href="jitter-rug.html#data-6"><i class="fa fa-check"></i><b>9.1</b> Data</a><ul>
<li class="chapter" data-level="9.1.1" data-path="jitter-rug.html"><a href="jitter-rug.html#codebook"><i class="fa fa-check"></i><b>9.1.1</b> Codebook</a></li>
<li class="chapter" data-level="9.1.2" data-path="jitter-rug.html"><a href="jitter-rug.html#preprocessing-the-spss-file"><i class="fa fa-check"></i><b>9.1.2</b> Preprocessing the SPSS File</a></li>
<li class="chapter" data-level="9.1.3" data-path="jitter-rug.html"><a href="jitter-rug.html#importing-with-the-spss-file-using-memisc"><i class="fa fa-check"></i><b>9.1.3</b> Importing with the SPSS file using memisc</a></li>
<li class="chapter" data-level="9.1.4" data-path="jitter-rug.html"><a href="jitter-rug.html#transform-data"><i class="fa fa-check"></i><b>9.1.4</b> Transform Data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="jitter-rug.html"><a href="jitter-rug.html#jitter"><i class="fa fa-check"></i><b>9.2</b> Jitter</a></li>
<li class="chapter" data-level="9.3" data-path="jitter-rug.html"><a href="jitter-rug.html#rug"><i class="fa fa-check"></i><b>9.3</b> Rug</a></li>
<li class="chapter" data-level="9.4" data-path="jitter-rug.html"><a href="jitter-rug.html#aesthetics"><i class="fa fa-check"></i><b>9.4</b> Aesthetics</a></li>
<li class="chapter" data-level="9.5" data-path="jitter-rug.html"><a href="jitter-rug.html#assignment-8"><i class="fa fa-check"></i><b>9.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html"><i class="fa fa-check"></i><b>10</b> Themes, Labels, and Colors</a><ul>
<li class="chapter" data-level="10.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#data-7"><i class="fa fa-check"></i><b>10.1</b> Data</a><ul>
<li class="chapter" data-level="10.1.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#zillow-real-estate-data"><i class="fa fa-check"></i><b>10.1.1</b> Zillow Real Estate Data</a></li>
<li class="chapter" data-level="10.1.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#reshaping-data-with-tidyr"><i class="fa fa-check"></i><b>10.1.2</b> Reshaping data with <code>tidyr</code></a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#starting-plot"><i class="fa fa-check"></i><b>10.2</b> Starting Plot</a></li>
<li class="chapter" data-level="10.3" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#themes"><i class="fa fa-check"></i><b>10.3</b> Themes</a><ul>
<li class="chapter" data-level="10.3.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#complete-themes"><i class="fa fa-check"></i><b>10.3.1</b> Complete Themes</a></li>
<li class="chapter" data-level="10.3.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#modifying-a-theme"><i class="fa fa-check"></i><b>10.3.2</b> Modifying a theme</a></li>
<li class="chapter" data-level="10.3.3" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#ggthemes"><i class="fa fa-check"></i><b>10.3.3</b> <code>ggthemes</code></a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#labels"><i class="fa fa-check"></i><b>10.4</b> Labels</a><ul>
<li class="chapter" data-level="10.4.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#title"><i class="fa fa-check"></i><b>10.4.1</b> Title</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#colors"><i class="fa fa-check"></i><b>10.5</b> Colors</a><ul>
<li class="chapter" data-level="10.5.1" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#color-scales"><i class="fa fa-check"></i><b>10.5.1</b> Color Scales</a></li>
<li class="chapter" data-level="10.5.2" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#color-brewer"><i class="fa fa-check"></i><b>10.5.2</b> Color Brewer</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="themes-labels-colors.html"><a href="themes-labels-colors.html#assignment-9"><i class="fa fa-check"></i><b>10.6</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="polar.html"><a href="polar.html"><i class="fa fa-check"></i><b>11</b> Polar Coordinates</a><ul>
<li class="chapter" data-level="11.1" data-path="polar.html"><a href="polar.html#data-8"><i class="fa fa-check"></i><b>11.1</b> Data</a><ul>
<li class="chapter" data-level="" data-path="polar.html"><a href="polar.html#survey-of-consumers"><i class="fa fa-check"></i>Survey of Consumers</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="polar.html"><a href="polar.html#simple-time-series"><i class="fa fa-check"></i><b>11.2</b> Simple Time Series</a></li>
<li class="chapter" data-level="11.3" data-path="polar.html"><a href="polar.html#stacked-periods"><i class="fa fa-check"></i><b>11.3</b> Stacked Periods</a></li>
<li class="chapter" data-level="11.4" data-path="polar.html"><a href="polar.html#polar-coordinates"><i class="fa fa-check"></i><b>11.4</b> Polar Coordinates</a></li>
<li class="chapter" data-level="11.5" data-path="polar.html"><a href="polar.html#assignment-10"><i class="fa fa-check"></i><b>11.5</b> Assignment</a></li>
<li class="chapter" data-level="11.6" data-path="polar.html"><a href="polar.html#data-attribution"><i class="fa fa-check"></i><b>11.6</b> Data Attribution</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="nlp.html"><a href="nlp.html"><i class="fa fa-check"></i><b>12</b> Text Analysis</a><ul>
<li class="chapter" data-level="12.1" data-path="nlp.html"><a href="nlp.html#data-9"><i class="fa fa-check"></i><b>12.1</b> Data</a><ul>
<li class="chapter" data-level="12.1.1" data-path="nlp.html"><a href="nlp.html#twitter"><i class="fa fa-check"></i><b>12.1.1</b> Twitter</a></li>
<li class="chapter" data-level="12.1.2" data-path="nlp.html"><a href="nlp.html#setting-up-twitter"><i class="fa fa-check"></i><b>12.1.2</b> Setting up twitteR</a></li>
<li class="chapter" data-level="12.1.3" data-path="nlp.html"><a href="nlp.html#finding-tweets"><i class="fa fa-check"></i><b>12.1.3</b> Finding tweets</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="nlp.html"><a href="nlp.html#tidytext"><i class="fa fa-check"></i><b>12.2</b> Tidytext</a></li>
<li class="chapter" data-level="12.3" data-path="nlp.html"><a href="nlp.html#n-grams"><i class="fa fa-check"></i><b>12.3</b> N-grams</a><ul>
<li class="chapter" data-level="12.3.1" data-path="nlp.html"><a href="nlp.html#skip-n-grams"><i class="fa fa-check"></i><b>12.3.1</b> Skip N-grams</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="nlp.html"><a href="nlp.html#assignment-11"><i class="fa fa-check"></i><b>12.4</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="networks.html"><a href="networks.html"><i class="fa fa-check"></i><b>13</b> Networks</a><ul>
<li class="chapter" data-level="13.1" data-path="networks.html"><a href="networks.html#data-10"><i class="fa fa-check"></i><b>13.1</b> Data</a><ul>
<li class="chapter" data-level="13.1.1" data-path="networks.html"><a href="networks.html#un-comtrade-database"><i class="fa fa-check"></i><b>13.1.1</b> UN Comtrade Database</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="networks.html"><a href="networks.html#geomnet"><i class="fa fa-check"></i><b>13.2</b> Geomnet</a></li>
<li class="chapter" data-level="13.3" data-path="networks.html"><a href="networks.html#ggnetwork"><i class="fa fa-check"></i><b>13.3</b> ggnetwork</a></li>
<li class="chapter" data-level="13.4" data-path="networks.html"><a href="networks.html#nodevertex-summary"><i class="fa fa-check"></i><b>13.4</b> Node/Vertex Summary</a></li>
<li class="chapter" data-level="13.5" data-path="networks.html"><a href="networks.html#assignment-12"><i class="fa fa-check"></i><b>13.5</b> Assignment</a><ul>
<li class="chapter" data-level="13.5.1" data-path="networks.html"><a href="networks.html#download-a-new-dataset"><i class="fa fa-check"></i><b>13.5.1</b> Download a new dataset</a></li>
<li class="chapter" data-level="13.5.2" data-path="networks.html"><a href="networks.html#create-a-visualization"><i class="fa fa-check"></i><b>13.5.2</b> Create a visualization</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="log.html"><a href="log.html"><i class="fa fa-check"></i><b>14</b> Log scales</a><ul>
<li class="chapter" data-level="14.1" data-path="log.html"><a href="log.html#basic-log-review"><i class="fa fa-check"></i><b>14.1</b> Basic Log Review</a><ul>
<li class="chapter" data-level="14.1.1" data-path="log.html"><a href="log.html#order-of-magnitude"><i class="fa fa-check"></i><b>14.1.1</b> Order of magnitude</a></li>
<li class="chapter" data-level="14.1.2" data-path="log.html"><a href="log.html#percent-change"><i class="fa fa-check"></i><b>14.1.2</b> Percent change</a></li>
<li class="chapter" data-level="14.1.3" data-path="log.html"><a href="log.html#histogram-comparison"><i class="fa fa-check"></i><b>14.1.3</b> Histogram comparison</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="log.html"><a href="log.html#data-11"><i class="fa fa-check"></i><b>14.2</b> Data</a></li>
<li class="chapter" data-level="14.3" data-path="log.html"><a href="log.html#logs-in-position"><i class="fa fa-check"></i><b>14.3</b> Logs in position</a><ul>
<li class="chapter" data-level="14.3.1" data-path="log.html"><a href="log.html#population-size-and-agi-per-capita"><i class="fa fa-check"></i><b>14.3.1</b> Population size and AGI per capita</a></li>
<li class="chapter" data-level="14.3.2" data-path="log.html"><a href="log.html#histogram-comparison-1"><i class="fa fa-check"></i><b>14.3.2</b> Histogram comparison</a></li>
<li class="chapter" data-level="14.3.3" data-path="log.html"><a href="log.html#taxes-and-farms"><i class="fa fa-check"></i><b>14.3.3</b> Taxes and Farms</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="log.html"><a href="log.html#logs-in-color"><i class="fa fa-check"></i><b>14.4</b> Logs in color</a></li>
<li class="chapter" data-level="14.5" data-path="log.html"><a href="log.html#assignment-13"><i class="fa fa-check"></i><b>14.5</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="cross-setion.html"><a href="cross-setion.html"><i class="fa fa-check"></i><b>15</b> Cross-Section Modeling</a><ul>
<li class="chapter" data-level="15.1" data-path="cross-setion.html"><a href="cross-setion.html#introduction"><i class="fa fa-check"></i><b>15.1</b> Introduction</a></li>
<li class="chapter" data-level="15.2" data-path="cross-setion.html"><a href="cross-setion.html#data-12"><i class="fa fa-check"></i><b>15.2</b> Data</a><ul>
<li class="chapter" data-level="15.2.1" data-path="cross-setion.html"><a href="cross-setion.html#layout"><i class="fa fa-check"></i><b>15.2.1</b> Layout</a></li>
<li class="chapter" data-level="15.2.2" data-path="cross-setion.html"><a href="cross-setion.html#data-dictionary"><i class="fa fa-check"></i><b>15.2.2</b> Data Dictionary</a></li>
<li class="chapter" data-level="15.2.3" data-path="cross-setion.html"><a href="cross-setion.html#the-2015-national-survey-of-college-graduates"><i class="fa fa-check"></i><b>15.2.3</b> The 2015 National Survey of College Graduates</a></li>
<li class="chapter" data-level="15.2.4" data-path="cross-setion.html"><a href="cross-setion.html#variable-definitions"><i class="fa fa-check"></i><b>15.2.4</b> Variable Definitions</a></li>
<li class="chapter" data-level="15.2.5" data-path="cross-setion.html"><a href="cross-setion.html#trainingvalidationtest-sets"><i class="fa fa-check"></i><b>15.2.5</b> Training/Validation/Test Sets</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="cross-setion.html"><a href="cross-setion.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>15.3</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="15.4" data-path="cross-setion.html"><a href="cross-setion.html#simple-linear-model"><i class="fa fa-check"></i><b>15.4</b> Simple linear model</a></li>
<li class="chapter" data-level="15.5" data-path="cross-setion.html"><a href="cross-setion.html#model-selection"><i class="fa fa-check"></i><b>15.5</b> Model selection</a><ul>
<li class="chapter" data-level="15.5.1" data-path="cross-setion.html"><a href="cross-setion.html#model-alternatives"><i class="fa fa-check"></i><b>15.5.1</b> Model alternatives</a></li>
<li class="chapter" data-level="15.5.2" data-path="cross-setion.html"><a href="cross-setion.html#comparing-model-performance"><i class="fa fa-check"></i><b>15.5.2</b> Comparing model performance</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="cross-setion.html"><a href="cross-setion.html#predictions-from-the-selected-model"><i class="fa fa-check"></i><b>15.6</b> Predictions from the selected model</a></li>
<li class="chapter" data-level="15.7" data-path="cross-setion.html"><a href="cross-setion.html#assignment-14"><i class="fa fa-check"></i><b>15.7</b> Assignment</a></li>
<li class="chapter" data-level="15.8" data-path="cross-setion.html"><a href="cross-setion.html#see-also"><i class="fa fa-check"></i><b>15.8</b> See also</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="time-series.html"><a href="time-series.html"><i class="fa fa-check"></i><b>16</b> Time-Series Modeling</a><ul>
<li class="chapter" data-level="16.1" data-path="time-series.html"><a href="time-series.html#introduction-1"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="time-series.html"><a href="time-series.html#data-13"><i class="fa fa-check"></i><b>16.2</b> Data</a></li>
<li class="chapter" data-level="16.3" data-path="time-series.html"><a href="time-series.html#hold-out-set"><i class="fa fa-check"></i><b>16.3</b> Hold-Out Set</a></li>
<li class="chapter" data-level="16.4" data-path="time-series.html"><a href="time-series.html#gdp"><i class="fa fa-check"></i><b>16.4</b> GDP</a></li>
<li class="chapter" data-level="16.5" data-path="time-series.html"><a href="time-series.html#autoregressive-model"><i class="fa fa-check"></i><b>16.5</b> Autoregressive Model</a><ul>
<li class="chapter" data-level="16.5.1" data-path="time-series.html"><a href="time-series.html#ar-performance"><i class="fa fa-check"></i><b>16.5.1</b> AR Performance</a></li>
</ul></li>
<li class="chapter" data-level="16.6" data-path="time-series.html"><a href="time-series.html#arima"><i class="fa fa-check"></i><b>16.6</b> ARIMA</a><ul>
<li class="chapter" data-level="16.6.1" data-path="time-series.html"><a href="time-series.html#arima-performance"><i class="fa fa-check"></i><b>16.6.1</b> ARIMA Performance</a></li>
</ul></li>
<li class="chapter" data-level="16.7" data-path="time-series.html"><a href="time-series.html#vector-autoregression"><i class="fa fa-check"></i><b>16.7</b> Vector Autoregression</a></li>
<li class="chapter" data-level="16.8" data-path="time-series.html"><a href="time-series.html#assignment-15"><i class="fa fa-check"></i><b>16.8</b> Assignment</a></li>
</ul></li>
<li class="part"><span><b>II Topics</b></span></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i>Data Sources Overview</a><ul>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#macro-data"><i class="fa fa-check"></i>Macro Data</a><ul>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#us"><i class="fa fa-check"></i>US</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#other-us"><i class="fa fa-check"></i>Other US</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#micro-data"><i class="fa fa-check"></i>Micro Data</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#hawaii-data"><i class="fa fa-check"></i>Hawaii Data</a></li>
<li class="chapter" data-level="" data-path="data-sources.html"><a href="data-sources.html#collections-of-data-lists"><i class="fa fa-check"></i>Collections of data lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html"><i class="fa fa-check"></i>Anscombe’s Quartet</a><ul>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#prep-the-data"><i class="fa fa-check"></i>Prep the data</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#numeric-summary"><i class="fa fa-check"></i>Numeric summary</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#visual-summary"><i class="fa fa-check"></i>Visual summary</a></li>
<li class="chapter" data-level="" data-path="anscombe.html"><a href="anscombe.html#the-datasaurus-dozen"><i class="fa fa-check"></i>The Datasaurus Dozen</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html"><i class="fa fa-check"></i>Probability</a><ul>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#hot-hands"><i class="fa fa-check"></i>Hot Hands</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#saving-your-code"><i class="fa fa-check"></i>Saving your code</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#getting-started"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#compared-to-what"><i class="fa fa-check"></i>Compared to What?</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#simulations-in-r"><i class="fa fa-check"></i>Simulations in R</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#simulating-the-independent-shooter"><i class="fa fa-check"></i>Simulating the Independent Shooter</a></li>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#on-your-own"><i class="fa fa-check"></i>On your own</a><ul>
<li class="chapter" data-level="" data-path="probability.html"><a href="probability.html#comparing-kobe-bryant-to-the-independent-shooter"><i class="fa fa-check"></i>Comparing Kobe Bryant to the Independent Shooter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html"><i class="fa fa-check"></i>Distributions</a><ul>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#the-data"><i class="fa fa-check"></i>The Data</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#the-normal-distribution"><i class="fa fa-check"></i>The normal distribution</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#evaluating-the-normal-distribution"><i class="fa fa-check"></i>Evaluating the normal distribution</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#normal-probabilities"><i class="fa fa-check"></i>Normal probabilities</a></li>
<li class="chapter" data-level="" data-path="distributions.html"><a href="distributions.html#on-your-own-1"><i class="fa fa-check"></i>On Your Own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="trifecta.html"><a href="trifecta.html"><i class="fa fa-check"></i>How to Judge Visualizations</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html"><i class="fa fa-check"></i>Intro to Inference</a><ul>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#the-data-1"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#the-unknown-sampling-distribution"><i class="fa fa-check"></i>The unknown sampling distribution</a></li>
<li><a href="inference.html#interlude-the-for-loop">Interlude: The <code>for</code> loop</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#sample-size-and-the-sampling-distribution"><i class="fa fa-check"></i>Sample size and the sampling distribution</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#on-your-own-2"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html"><i class="fa fa-check"></i>Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#sampling-from-ames-iowa"><i class="fa fa-check"></i>Sampling from Ames, Iowa</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#the-data-2"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#confidence-intervals"><i class="fa fa-check"></i>Confidence intervals</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#confidence-levels"><i class="fa fa-check"></i>Confidence levels</a></li>
<li class="chapter" data-level="" data-path="confidence-intervals.html"><a href="confidence-intervals.html#on-your-own-3"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html"><i class="fa fa-check"></i>Inference for Numerical Data</a><ul>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#north-carolina-births"><i class="fa fa-check"></i>North Carolina births</a></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#exploratory-analysis"><i class="fa fa-check"></i>Exploratory analysis</a></li>
<li class="chapter" data-level="" data-path="inference.html"><a href="inference.html#inference"><i class="fa fa-check"></i>Inference</a></li>
<li><a href="inference-numerical.html#stats-package"><code>stats</code> package</a></li>
<li class="chapter" data-level="" data-path="inference-numerical.html"><a href="inference-numerical.html#on-your-own-4"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html"><i class="fa fa-check"></i>Inference for Categorical Data</a><ul>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#the-survey"><i class="fa fa-check"></i>The survey</a></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#the-data-3"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#inference-on-proportions"><i class="fa fa-check"></i>Inference on proportions</a></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#how-does-the-proportion-affect-the-margin-of-error"><i class="fa fa-check"></i>How does the proportion affect the margin of error?</a></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#success-failure-condition"><i class="fa fa-check"></i>Success-failure condition</a></li>
<li class="chapter" data-level="" data-path="inference-categorical.html"><a href="inference-categorical.html#on-your-own-5"><i class="fa fa-check"></i>On your own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html"><i class="fa fa-check"></i>Introduction to Linear Regression</a><ul>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#batter-up"><i class="fa fa-check"></i>Batter up</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#the-data-4"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#sum-of-squared-residuals"><i class="fa fa-check"></i>Sum of squared residuals</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#the-linear-model"><i class="fa fa-check"></i>The linear model</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#prediction-and-prediction-errors"><i class="fa fa-check"></i>Prediction and prediction errors</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#model-diagnostics"><i class="fa fa-check"></i>Model diagnostics</a></li>
<li class="chapter" data-level="" data-path="linear-regression.html"><a href="linear-regression.html#on-your-own-6"><i class="fa fa-check"></i>On Your Own</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html"><i class="fa fa-check"></i>Multiple Linear Regression</a><ul>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#grading-the-professor"><i class="fa fa-check"></i>Grading the professor</a></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#the-data-5"><i class="fa fa-check"></i>The data</a></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#exploring-the-data"><i class="fa fa-check"></i>Exploring the data</a></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#simple-linear-regression"><i class="fa fa-check"></i>Simple linear regression</a></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#multiple-linear-regression"><i class="fa fa-check"></i>Multiple linear regression</a></li>
<li class="chapter" data-level="" data-path="multiple-regression.html"><a href="multiple-regression.html#the-search-for-the-best-model"><i class="fa fa-check"></i>The search for the best model</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Analysis and Visualization</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cross-setion" class="section level1">
<h1><span class="header-section-number">Lecture 15</span> Cross-Section Modeling</h1>
<p>This lecture uses the following packages:</p>
<pre><code>tidyverse
GGally</code></pre>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">15.1</span> Introduction</h2>
<p>Modeling data gives you the possibility of predicting outside of the sample of data you have to extrapolate to observational units you have not observed (inference). In this lecture we will focus on how to do this in a cross-sectional setting (i.e., not over time). We will be trying to create a model of salary for recent college graduates. The result will be a model and a set of parameter estimates that can be used to predict the salary for a recent graduate our modeling process did not see (i.e., extrapolate).</p>
</div>
<div id="data-12" class="section level2">
<h2><span class="header-section-number">15.2</span> Data</h2>
<p>The National Science Foundation (NSF) runs the <a href="https://ncsesdata.nsf.gov/datadownload/">National Survey of College Graduates</a>. We’ll use this data to compare salaries for different majors. For the rest of this lecture, I’ll assume you’ve downloaded the 2015 zip file and extracted the contents to a folder named “nscg”.</p>
<div id="layout" class="section level3">
<h3><span class="header-section-number">15.2.1</span> Layout</h3>
<p>The raw data is in a fixed width format, so we’ll need to know what the layout is.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
layout &lt;-<span class="st"> </span><span class="kw">read_table</span>(<span class="st">&quot;data/nscg/LAYOUTPCG15.TXT&quot;</span>, <span class="dt">skip =</span> <span class="dv">2</span>, <span class="dt">col_types =</span> <span class="st">&quot;ciciicc&quot;</span>) %&gt;%
<span class="st">  </span><span class="kw">slice</span>(<span class="dv">2</span>:<span class="kw">n</span>())</code></pre></div>
<p>Let’s see if there are any gaps by seing if there is a difference between the start and the last ending plus 1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(layout$START -<span class="st"> </span>(<span class="kw">lag</span>(layout$END) +<span class="st"> </span><span class="dv">1</span>))</code></pre></div>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##       0       0       0       0       0       0       1</code></pre>
</div>
<div id="data-dictionary" class="section level3">
<h3><span class="header-section-number">15.2.2</span> Data Dictionary</h3>
<p>The data dictionary is stored in an Excel file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)
dict &lt;-<span class="st"> </span><span class="kw">read_xlsx</span>(<span class="st">&quot;data/nscg/Dpcg15.xlsx&quot;</span>)</code></pre></div>
<p>The data dictionary provides more detail than the layout file, which is useful for identifying the variables we want to work with.</p>
</div>
<div id="the-2015-national-survey-of-college-graduates" class="section level3">
<h3><span class="header-section-number">15.2.3</span> The 2015 National Survey of College Graduates</h3>
<p>Processing this whole file will take some time.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">raw_survey &lt;-<span class="st"> </span><span class="kw">read_fwf</span>(<span class="st">&quot;data/nscg/EPCG15.DAT&quot;</span>, <span class="kw">fwf_widths</span>(layout$LENGTH, <span class="dt">col_names =</span> layout$LABEL))</code></pre></div>
<p>For the factor variables, we can look at the <code>Ppcg15.sas</code> file for the mappings from integer values into character vectors. The below functions accept a vector of integers and return a character vector.</p>
</div>
<div id="variable-definitions" class="section level3">
<h3><span class="header-section-number">15.2.4</span> Variable Definitions</h3>
<p>From looking at the Excel file, we can determine the label mapping for each variable. The label mapping name is in the <code>SAS_FMT</code> column. We can then look at the <code>Ppcg15.sas</code> file to see the corresponding mapping. We just need to edit these mappings slightly so they fit into a factor definition. (There do exist packages that will do this for you, but the following process gives you more control.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ethnicity &lt;-<span class="st"> </span>function(x) {
  <span class="kw">factor</span>(
    x, 
    <span class="dt">levels =</span> <span class="dv">1</span>:<span class="dv">7</span>, 
    <span class="dt">labels =</span> <span class="kw">c</span>(
      <span class="st">&quot;Asian, non-Hispanic ONLY&quot;</span>,
      <span class="st">&quot;American Indian/Alaska Native, non-Hispanic ONLY&quot;</span>,
      <span class="st">&quot;Black, non-Hispanic ONLY&quot;</span>,
      <span class="st">&quot;Hispanic, any race&quot;</span>,
      <span class="st">&quot;White, non-Hispanic ONLY&quot;</span>,
      <span class="st">&quot;Non-Hispanic Native Hawaiian/Other Pacific Islander ONLY&quot;</span>,
      <span class="st">&quot;Multiple Race&quot;</span>
    )
  )
}

work_activities &lt;-<span class="st"> </span>function(x) {
  work_mapping &lt;-<span class="st"> </span><span class="kw">matrix</span>(
    <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>,
    <span class="dt">data =</span> <span class="kw">c</span>(
      <span class="st">&quot;01&quot;</span>, <span class="st">&quot;Accounting, finance, contracts&quot;</span>,
      <span class="st">&quot;02&quot;</span>, <span class="st">&quot;Basic res.-study to gain sci. knwldg prima. for its own sake&quot;</span>,
      <span class="st">&quot;03&quot;</span>, <span class="st">&quot;Apld. res.-study to gain sci. knwldg to meet recognized need&quot;</span>,
      <span class="st">&quot;04&quot;</span>, <span class="st">&quot;Dev.-knowledge from res. for the prod. of materials, devices&quot;</span>,
      <span class="st">&quot;05&quot;</span>, <span class="st">&quot;Design of equipment, processes, structures, models&quot;</span>,
      <span class="st">&quot;06&quot;</span>, <span class="st">&quot;Computer applications, programming, systems development&quot;</span>,
      <span class="st">&quot;07&quot;</span>, <span class="st">&quot;Human Resources - inc. recruiting, personnel dev, training&quot;</span>,
      <span class="st">&quot;08&quot;</span>, <span class="st">&quot;Managing or supervising people or projects&quot;</span>,
      <span class="st">&quot;09&quot;</span>, <span class="st">&quot;Production, operations, maintenance (e.g., chip production)&quot;</span>,
      <span class="st">&quot;10&quot;</span>, <span class="st">&quot;Prof. services (healthcare, fin. serv., legal serv., etc.)&quot;</span>,
      <span class="st">&quot;11&quot;</span>, <span class="st">&quot;Sales, purchasing, marketing&quot;</span>,
      <span class="st">&quot;12&quot;</span>, <span class="st">&quot;Quality or productivity management&quot;</span>,
      <span class="st">&quot;13&quot;</span>, <span class="st">&quot;Teaching&quot;</span>,
      <span class="st">&quot;14&quot;</span>, <span class="st">&quot;Other work activity&quot;</span>
    )
  )
  <span class="kw">return</span>(<span class="kw">factor</span>(x, <span class="dt">levels =</span> work_mapping[,<span class="dv">1</span>], <span class="dt">labels =</span> work_mapping[,<span class="dv">2</span>]))
}

fields &lt;-<span class="st"> </span>function(x) {
  field_mapping &lt;-<span class="st"> </span><span class="kw">matrix</span>(
    <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>,
    <span class="dt">data =</span> <span class="kw">c</span>(
      <span class="dv">11</span>, <span class="st">&quot;Computer and information sciences&quot;</span>,
      <span class="dv">12</span>, <span class="st">&quot;Mathematics and statistics&quot;</span>,
      <span class="dv">21</span>, <span class="st">&quot;Agricultural and food sciences&quot;</span>,
      <span class="dv">22</span>, <span class="st">&quot;Biological sciences&quot;</span>,
      <span class="dv">23</span>, <span class="st">&quot;Environmental life sciences&quot;</span>,
      <span class="dv">31</span>, <span class="st">&quot;Chemistry, except biochemistry&quot;</span>,
      <span class="dv">32</span>, <span class="st">&quot;Earth, atmospheric and ocean sciences&quot;</span>,
      <span class="dv">33</span>, <span class="st">&quot;Physics and astronomy&quot;</span>,
      <span class="dv">34</span>, <span class="st">&quot;Other physical sciences&quot;</span>,
      <span class="dv">41</span>, <span class="st">&quot;Economics&quot;</span>,
      <span class="dv">42</span>, <span class="st">&quot;Political and related sciences&quot;</span>,
      <span class="dv">43</span>, <span class="st">&quot;Psychology&quot;</span>,
      <span class="dv">44</span>, <span class="st">&quot;Sociology and anthropology&quot;</span>,
      <span class="dv">45</span>, <span class="st">&quot;Other social sciences&quot;</span>,
      <span class="dv">51</span>, <span class="st">&quot;Aerospace, aeronautical and astronautical engineering&quot;</span>,
      <span class="dv">52</span>, <span class="st">&quot;Chemical engineering&quot;</span>,
      <span class="dv">53</span>, <span class="st">&quot;Civil and architectural engineering&quot;</span>,
      <span class="dv">54</span>, <span class="st">&quot;Electrical and computer engineering&quot;</span>,
      <span class="dv">55</span>, <span class="st">&quot;Industrial engineering&quot;</span>,
      <span class="dv">56</span>, <span class="st">&quot;Mechanical engineering&quot;</span>,
      <span class="dv">57</span>, <span class="st">&quot;Other engineering&quot;</span>,
      <span class="dv">61</span>, <span class="st">&quot;Health&quot;</span>,
      <span class="dv">62</span>, <span class="st">&quot;Science and mathematics teacher education&quot;</span>,
      <span class="dv">63</span>, <span class="st">&quot;Technology and Technical Fields&quot;</span>,
      <span class="dv">64</span>, <span class="st">&quot;Other S&amp;E related fields&quot;</span>,
      <span class="dv">71</span>, <span class="st">&quot;Management and administration fields&quot;</span>,
      <span class="dv">72</span>, <span class="st">&quot;Education, except science and math teacher education&quot;</span>,
      <span class="dv">73</span>, <span class="st">&quot;Social service and related fields&quot;</span>,
      <span class="dv">74</span>, <span class="st">&quot;Sales and marketing fields&quot;</span>,
      <span class="dv">75</span>, <span class="st">&quot;Art and Humanities Fields&quot;</span>,
      <span class="dv">76</span>, <span class="st">&quot;Other Non-S&amp;E fields&quot;</span>
    )
  )
  <span class="kw">return</span>(<span class="kw">factor</span>(x, <span class="dt">levels =</span> <span class="kw">as.numeric</span>(field_mapping[,<span class="dv">1</span>]), <span class="dt">labels =</span> field_mapping[,<span class="dv">2</span>]))
}

locations &lt;-<span class="st"> </span>function(x) {
  location_mapping &lt;-<span class="st"> </span><span class="kw">matrix</span>(
    <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>,
    <span class="dt">data =</span> <span class="kw">c</span>(
      <span class="st">&quot;099&quot;</span>, <span class="st">&quot;US, Unspecified&quot;</span>,
      <span class="st">&quot;100&quot;</span>, <span class="st">&quot;Albania&quot;</span>,
      <span class="st">&quot;102&quot;</span>, <span class="st">&quot;Austria&quot;</span>,
      <span class="st">&quot;103&quot;</span>, <span class="st">&quot;Belgium&quot;</span>,
      <span class="st">&quot;104&quot;</span>, <span class="st">&quot;Bulgaria&quot;</span>,
      <span class="st">&quot;109&quot;</span>, <span class="st">&quot;France&quot;</span>,
      <span class="st">&quot;110&quot;</span>, <span class="st">&quot;Germany, not specified&quot;</span>,
      <span class="st">&quot;116&quot;</span>, <span class="st">&quot;Greece&quot;</span>,
      <span class="st">&quot;119&quot;</span>, <span class="st">&quot;Ireland&quot;</span>,
      <span class="st">&quot;120&quot;</span>, <span class="st">&quot;Italy&quot;</span>,
      <span class="st">&quot;126&quot;</span>, <span class="st">&quot;Netherlands&quot;</span>,
      <span class="st">&quot;128&quot;</span>, <span class="st">&quot;Poland&quot;</span>,
      <span class="st">&quot;132&quot;</span>, <span class="st">&quot;Romania&quot;</span>,
      <span class="st">&quot;134&quot;</span>, <span class="st">&quot;Spain&quot;</span>,
      <span class="st">&quot;136&quot;</span>, <span class="st">&quot;Sweden&quot;</span>,
      <span class="st">&quot;137&quot;</span>, <span class="st">&quot;Switzerland&quot;</span>,
      <span class="st">&quot;138&quot;</span>, <span class="st">&quot;United Kingdom, not specified&quot;</span>,
      <span class="st">&quot;139&quot;</span>, <span class="st">&quot;England&quot;</span>,
      <span class="st">&quot;140&quot;</span>, <span class="st">&quot;Scotland&quot;</span>,
      <span class="st">&quot;142&quot;</span>, <span class="st">&quot;Northern Ireland&quot;</span>,
      <span class="st">&quot;148&quot;</span>, <span class="st">&quot;Europe, not specified&quot;</span>,
      <span class="st">&quot;149&quot;</span>, <span class="st">&quot;Central Europe, not specified&quot;</span>,
      <span class="st">&quot;150&quot;</span>, <span class="st">&quot;Eastern Europe, not specified&quot;</span>,
      <span class="st">&quot;152&quot;</span>, <span class="st">&quot;Northern Europe, not specified&quot;</span>,
      <span class="st">&quot;153&quot;</span>, <span class="st">&quot;Southern Europe, not specified&quot;</span>,
      <span class="st">&quot;154&quot;</span>, <span class="st">&quot;Western Europe, not specified&quot;</span>,
      <span class="st">&quot;156&quot;</span>, <span class="st">&quot;Serbia/Montenegro/Kosovo&quot;</span>,
      <span class="st">&quot;160&quot;</span>, <span class="st">&quot;Croatia&quot;</span>,
      <span class="st">&quot;180&quot;</span>, <span class="st">&quot;USSR&quot;</span>,
      <span class="st">&quot;186&quot;</span>, <span class="st">&quot;Belarus (Byelarus)&quot;</span>,
      <span class="st">&quot;187&quot;</span>, <span class="st">&quot;Russia&quot;</span>,
      <span class="st">&quot;193&quot;</span>, <span class="st">&quot;Ukraine&quot;</span>,
      <span class="st">&quot;202&quot;</span>, <span class="st">&quot;Bangladesh&quot;</span>,
      <span class="st">&quot;207&quot;</span>, <span class="st">&quot;China&quot;</span>,
      <span class="st">&quot;210&quot;</span>, <span class="st">&quot;India&quot;</span>,
      <span class="st">&quot;212&quot;</span>, <span class="st">&quot;Iran&quot;</span>,
      <span class="st">&quot;213&quot;</span>, <span class="st">&quot;Iraq&quot;</span>,
      <span class="st">&quot;214&quot;</span>, <span class="st">&quot;Israel&quot;</span>,
      <span class="st">&quot;215&quot;</span>, <span class="st">&quot;Japan&quot;</span>,
      <span class="st">&quot;216&quot;</span>, <span class="st">&quot;Jordan&quot;</span>,
      <span class="st">&quot;217&quot;</span>, <span class="st">&quot;Korea, not specified&quot;</span>,
      <span class="st">&quot;218&quot;</span>, <span class="st">&quot;South Korea&quot;</span>,
      <span class="st">&quot;222&quot;</span>, <span class="st">&quot;Lebanon&quot;</span>,
      <span class="st">&quot;223&quot;</span>, <span class="st">&quot;Macao&quot;</span>,
      <span class="st">&quot;227&quot;</span>, <span class="st">&quot;Nepal&quot;</span>,
      <span class="st">&quot;229&quot;</span>, <span class="st">&quot;Pakistan&quot;</span>,
      <span class="st">&quot;231&quot;</span>, <span class="st">&quot;Philippines&quot;</span>,
      <span class="st">&quot;232&quot;</span>, <span class="st">&quot;Qatar&quot;</span>,
      <span class="st">&quot;233&quot;</span>, <span class="st">&quot;Saudi Arabia&quot;</span>,
      <span class="st">&quot;236&quot;</span>, <span class="st">&quot;Sri Lanka&quot;</span>,
      <span class="st">&quot;238&quot;</span>, <span class="st">&quot;Taiwan&quot;</span>,
      <span class="st">&quot;239&quot;</span>, <span class="st">&quot;Thailand&quot;</span>,
      <span class="st">&quot;240&quot;</span>, <span class="st">&quot;Turkey&quot;</span>,
      <span class="st">&quot;242&quot;</span>, <span class="st">&quot;Vietnam&quot;</span>,
      <span class="st">&quot;245&quot;</span>, <span class="st">&quot;Asia, not specified&quot;</span>,
      <span class="st">&quot;247&quot;</span>, <span class="st">&quot;East Asia, not specified&quot;</span>,
      <span class="st">&quot;252&quot;</span>, <span class="st">&quot;Middle East, not specified&quot;</span>,
      <span class="st">&quot;255&quot;</span>, <span class="st">&quot;Southeast Asia, not specified&quot;</span>,
      <span class="st">&quot;257&quot;</span>, <span class="st">&quot;Southwest Asia, not specified&quot;</span>,
      <span class="st">&quot;301&quot;</span>, <span class="st">&quot;Canada&quot;</span>,
      <span class="st">&quot;304&quot;</span>, <span class="st">&quot;North America, not specified&quot;</span>,
      <span class="st">&quot;312&quot;</span>, <span class="st">&quot;El Salvador&quot;</span>,
      <span class="st">&quot;315&quot;</span>, <span class="st">&quot;Mexico&quot;</span>,
      <span class="st">&quot;318&quot;</span>, <span class="st">&quot;Central America, not specified&quot;</span>,
      <span class="st">&quot;337&quot;</span>, <span class="st">&quot;Cuba&quot;</span>,
      <span class="st">&quot;339&quot;</span>, <span class="st">&quot;Dominican Republic&quot;</span>,
      <span class="st">&quot;343&quot;</span>, <span class="st">&quot;Jamaica&quot;</span>,
      <span class="st">&quot;353&quot;</span>, <span class="st">&quot;Caribbean, not specified&quot;</span>,
      <span class="st">&quot;375&quot;</span>, <span class="st">&quot;Argentina&quot;</span>,
      <span class="st">&quot;377&quot;</span>, <span class="st">&quot;Brazil&quot;</span>,
      <span class="st">&quot;379&quot;</span>, <span class="st">&quot;Colombia&quot;</span>,
      <span class="st">&quot;380&quot;</span>, <span class="st">&quot;Ecuador&quot;</span>,
      <span class="st">&quot;385&quot;</span>, <span class="st">&quot;Peru&quot;</span>,
      <span class="st">&quot;388&quot;</span>, <span class="st">&quot;Venezuela&quot;</span>,
      <span class="st">&quot;389&quot;</span>, <span class="st">&quot;South America, not specified&quot;</span>,
      <span class="st">&quot;408&quot;</span>, <span class="st">&quot;Cameroon&quot;</span>,
      <span class="st">&quot;415&quot;</span>, <span class="st">&quot;Egypt&quot;</span>,
      <span class="st">&quot;417&quot;</span>, <span class="st">&quot;Ethiopia&quot;</span>,
      <span class="st">&quot;421&quot;</span>, <span class="st">&quot;Ghana&quot;</span>,
      <span class="st">&quot;436&quot;</span>, <span class="st">&quot;Morocco&quot;</span>,
      <span class="st">&quot;437&quot;</span>, <span class="st">&quot;Mozambique&quot;</span>,
      <span class="st">&quot;440&quot;</span>, <span class="st">&quot;Nigeria&quot;</span>,
      <span class="st">&quot;449&quot;</span>, <span class="st">&quot;South Africa&quot;</span>,
      <span class="st">&quot;462&quot;</span>, <span class="st">&quot;Africa, not specified&quot;</span>,
      <span class="st">&quot;463&quot;</span>, <span class="st">&quot;Central Africa, not specified&quot;</span>,
      <span class="st">&quot;464&quot;</span>, <span class="st">&quot;Eastern Africa, not specified&quot;</span>,
      <span class="st">&quot;468&quot;</span>, <span class="st">&quot;North Africa, not specified&quot;</span>,
      <span class="st">&quot;469&quot;</span>, <span class="st">&quot;Western Africa, not specified&quot;</span>,
      <span class="st">&quot;470&quot;</span>, <span class="st">&quot;Southern Africa, not specified&quot;</span>,
      <span class="st">&quot;471&quot;</span>, <span class="st">&quot;Eritrea&quot;</span>,
      <span class="st">&quot;501&quot;</span>, <span class="st">&quot;Australia&quot;</span>,
      <span class="st">&quot;514&quot;</span>, <span class="st">&quot;New Zealand&quot;</span>,
      <span class="st">&quot;527&quot;</span>, <span class="st">&quot;Oceania, not specified&quot;</span>
    )
  )
  <span class="kw">return</span>(<span class="kw">factor</span>(x, <span class="dt">levels =</span> location_mapping[,<span class="dv">1</span>], <span class="dt">labels =</span> location_mapping[,<span class="dv">2</span>]))
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">survey &lt;-<span class="st"> </span>raw_survey %&gt;%
<span class="st">  </span><span class="kw">transmute</span>(
    <span class="dt">age =</span> U_DEM_AGE,
    <span class="dt">gender =</span> <span class="kw">factor</span>(U_DEM_GENDER),
    <span class="dt">race_ethnicity =</span> <span class="kw">ethnicity</span>(U_DEM_MULTIPLE_RACE_ETHNICITY_CAT),
    <span class="dt">years_since_degree =</span> <span class="dv">2015</span> -<span class="st"> </span>M_ED_MR_DEGREE_AWARD_YR,
    <span class="dt">degree_type =</span> <span class="kw">factor</span>(
      M_ED_MR_DEGREE_TYPE, 
      <span class="dt">levels =</span> <span class="dv">1</span>:<span class="dv">4</span>, 
      <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&#39;Bachelors&#39;</span>, <span class="st">&#39;Masters&#39;</span>, <span class="st">&#39;Doctorate&#39;</span>, <span class="st">&#39;Professional&#39;</span>)
    ),
    <span class="dt">current_location =</span> <span class="kw">locations</span>(U_RESPONDENT_LOCATION_STATE_COUNTRY),
    <span class="dt">highschool_location =</span> <span class="kw">locations</span>(L_ED_HS_SCHOOL_ST_CTRY_CD),
    <span class="dt">school_in_US =</span> M_ED_MR_SCHOOL_REGION_US_NONUS ==<span class="st"> &#39;Y&#39;</span>,
    <span class="dt">moved =</span> current_location !=<span class="st"> </span>highschool_location,
    <span class="dt">r1 =</span> M_ED_MR_SCHOOL_CARNEGIE_CLS ==<span class="st"> &quot;11&quot;</span>,
    <span class="dt">field_of_study_group =</span> <span class="kw">factor</span>(<span class="kw">case_when</span>(
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">1</span> ~<span class="st"> &#39;Computer and mathematical sciences&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">2</span> ~<span class="st"> &#39;Biological, agricultural and environmental life sciences&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">3</span> ~<span class="st"> &#39;Physical and related sciences&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">4</span> ~<span class="st"> &#39;Social and related sciences&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">5</span> ~<span class="st"> &#39;Engineering&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">6</span> ~<span class="st"> &#39;S&amp;E-Related Fields&#39;</span>,
      O_ED_HD_MAJOR_ED_GRP_MAJOR_NEW ==<span class="st"> </span><span class="dv">7</span> ~<span class="st"> &#39;Non-S&amp;E&#39;</span>
    )),
    <span class="dt">field_of_study =</span> <span class="kw">fields</span>(O_ED_HD_MAJOR_ED_GRP_MINOR_NEW),
    <span class="dt">in_school =</span> <span class="kw">case_when</span>(
      N_ED_REF_WK_ENROLL_FT_PT_IND ==<span class="st"> &#39;1&#39;</span> ~<span class="st"> </span><span class="ot">TRUE</span>,
      N_ED_REF_WK_ENROLL_FT_PT_IND ==<span class="st"> &#39;2&#39;</span> ~<span class="st"> </span><span class="ot">TRUE</span>,
      <span class="ot">TRUE</span> ~<span class="st"> </span><span class="ot">FALSE</span>
    ),
    <span class="dt">work_activity =</span> <span class="kw">work_activities</span>(F_JOB_WRK_ACTIVITY_PRIMRY),
    <span class="dt">salary =</span> <span class="kw">ifelse</span>(H_JOB_SALARY_ANN ==<span class="st"> </span><span class="dv">9999998</span>, <span class="ot">NA</span>, H_JOB_SALARY_ANN),
    <span class="dt">income =</span> <span class="kw">ifelse</span>(H_JOB_TOTAL_INCOME ==<span class="st"> </span><span class="dv">9999998</span>, <span class="ot">NA</span>, H_JOB_TOTAL_INCOME)
  )</code></pre></div>
</div>
<div id="trainingvalidationtest-sets" class="section level3">
<h3><span class="header-section-number">15.2.5</span> Training/Validation/Test Sets</h3>
<p>There are several things we need to do with this data.</p>
<ol style="list-style-type: decimal">
<li>We want to create candidate models of salary</li>
<li>We want to select a model based on its predictive accuracy</li>
<li>We want to produce an estimate of the predictive accuracy of our chosen model</li>
</ol>
<p>To accomplish these three goals, we need divide our data into three parts. The reason we need to split our data, is to avoid bias in our inferences. Bias is a systematic mistake in our inferences, which is bad. Since we are decreasing our sample size we will be increasing the variance of our inferences. This <a href="https://en.wikipedia.org/wiki/Bias%E2%80%93variance_tradeoff">bias-variance tradeoff</a> is an important concept in machine learning, but here we’ll just recognize it exists.</p>
<p>We will call the data for (1) our training dataset, the data for (2) our validation dataset, and the data for (3) our test set. For simplicity here we’ll split our data 80%-10%-10% into our training-validation-test sets. An easy way to grab random chunks of the data is to permute the indices, then take the first 80%, then 10%, etc.</p>
<p>Let’s make a decision up front to predicr</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">survey &lt;-<span class="st"> </span>survey %&gt;%<span class="st"> </span><span class="kw">filter</span>(salary &gt;<span class="st"> </span><span class="dv">0</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">train_size &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">nrow</span>(survey) *<span class="st"> </span><span class="fl">0.8</span>)
validation_size &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="kw">nrow</span>(survey) *<span class="st"> </span><span class="fl">0.1</span>)
test_size &lt;-<span class="st"> </span><span class="kw">nrow</span>(survey) -<span class="st"> </span>train_size -<span class="st"> </span>validation_size
permuted_indices &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dv">1</span>:<span class="kw">nrow</span>(survey))

train &lt;-<span class="st"> </span>survey[permuted_indices[<span class="dv">1</span>:train_size],]
validation &lt;-<span class="st"> </span>survey[permuted_indices[(train_size +<span class="st"> </span><span class="dv">1</span>):validation_size],]
test &lt;-<span class="st"> </span>survey[permuted_indices[(validation_size +<span class="st"> </span><span class="dv">1</span>):<span class="kw">length</span>(permuted_indices)],]</code></pre></div>
</div>
</div>
<div id="exploratory-data-analysis" class="section level2">
<h2><span class="header-section-number">15.3</span> Exploratory Data Analysis</h2>
<p>Let’s begin by exploring our training set. We can start with a quick summary of all variables to see which could be meaningful in our model:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(train)</code></pre></div>
<pre><code>##       age        gender   
##  Min.   :16.00   F:27869  
##  1st Qu.:31.00   M:33310  
##  Median :39.00            
##  Mean   :42.27            
##  3rd Qu.:53.00            
##  Max.   :75.00            
##                           
##                                                   race_ethnicity 
##  Asian, non-Hispanic ONLY                                : 9673  
##  American Indian/Alaska Native, non-Hispanic ONLY        :  265  
##  Black, non-Hispanic ONLY                                : 4759  
##  Hispanic, any race                                      : 6451  
##  White, non-Hispanic ONLY                                :38157  
##  Non-Hispanic Native Hawaiian/Other Pacific Islander ONLY:  226  
##  Multiple Race                                           : 1648  
##  years_since_degree       degree_type   
##  Min.   : 0.00      Bachelors   :29678  
##  1st Qu.: 6.00      Masters     :24123  
##  Median :11.00      Doctorate   : 4875  
##  Mean   :15.36      Professional: 2503  
##  3rd Qu.:23.00                          
##  Max.   :56.00                          
##                                         
##                      current_location  highschool_location school_in_US   
##  Asia, not specified         :   17   India      : 2151    Mode :logical  
##  Europe, not specified       :   10   China      : 1211    FALSE:4587     
##  North America, not specified:    8   Canada     :  473    TRUE :56592    
##  Mexico                      :    5   Philippines:  472                   
##  Africa, not specified       :    4   Taiwan     :  290                   
##  (Other)                     :    6   (Other)    : 4929                   
##  NA&#39;s                        :61129   NA&#39;s       :51653                   
##    moved             r1         
##  Mode :logical   Mode :logical  
##  FALSE:4         FALSE:40798    
##  TRUE :28        TRUE :20381    
##  NA&#39;s :61147                    
##                                 
##                                 
##                                 
##                                                field_of_study_group
##  Biological, agricultural and environmental life sciences: 5250    
##  Computer and mathematical sciences                      : 5099    
##  Engineering                                             :12742    
##  Non-S&amp;E                                                 :16892    
##  Physical and related sciences                           : 2964    
##  S&amp;E-Related Fields                                      : 8749    
##  Social and related sciences                             : 9483    
##                               field_of_study  in_school      
##  Health                              : 6525   Mode :logical  
##  Management and administration fields: 5734   FALSE:57223    
##  Biological sciences                 : 3920   TRUE :3956     
##  Electrical and computer engineering : 3723                  
##  Other Non-S&amp;E fields                : 3617                  
##  Computer and information sciences   : 3513                  
##  (Other)                             :34147                  
##                                                       work_activity  
##  Managing or supervising people or projects                  :10345  
##  Prof. services (healthcare, fin. serv., legal serv., etc.)  :10078  
##  Teaching                                                    : 7443  
##  Sales, purchasing, marketing                                : 4492  
##  Apld. res.-study to gain sci. knwldg to meet recognized need: 4464  
##  Computer applications, programming, systems development     : 4438  
##  (Other)                                                     :19919  
##      salary            income       
##  Min.   :    100   Min.   :      0  
##  1st Qu.:  45000   1st Qu.:  44076  
##  Median :  70400   Median :  70000  
##  Mean   :  84228   Mean   :  90683  
##  3rd Qu.: 100000   3rd Qu.: 102926  
##  Max.   :1223166   Max.   :1890537  
##                    NA&#39;s   :28</code></pre>
<p>We can see that our location variables are mostly NAs. We will drop these variables from our analysis to avoid several issues like multicollinearity and sampling bias.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(GGally)
train %&gt;%
<span class="st">  </span><span class="kw">sample_n</span>(<span class="dv">1000</span>) %&gt;%
<span class="st">  </span><span class="kw">as.data.frame</span>() %&gt;%
<span class="st">  </span>GGally::<span class="kw">ggscatmat</span>(<span class="dt">alpha =</span> <span class="fl">0.1</span>)</code></pre></div>
<p><img src="15-cross-section_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="simple-linear-model" class="section level2">
<h2><span class="header-section-number">15.4</span> Simple linear model</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_model &lt;-<span class="st"> </span><span class="kw">lm</span>(<span class="kw">log</span>(salary +<span class="st"> </span><span class="dv">1</span>) ~<span class="st"> </span><span class="kw">I</span>(age -<span class="st"> </span><span class="dv">25</span>) +<span class="st"> </span><span class="kw">I</span>((age -<span class="st"> </span><span class="dv">25</span>)^<span class="dv">2</span>) , <span class="dt">data =</span> train)
<span class="kw">summary</span>(basic_model)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = log(salary + 1) ~ I(age - 25) + I((age - 25)^2), 
##     data = train)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -6.6384 -0.3026  0.1348  0.4799  3.4965 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)      1.065e+01  8.015e-03 1329.17   &lt;2e-16 ***
## I(age - 25)      5.410e-02  9.770e-04   55.37   &lt;2e-16 ***
## I((age - 25)^2) -1.185e-03  2.296e-05  -51.60   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.8477 on 61176 degrees of freedom
## Multiple R-squared:  0.04827,    Adjusted R-squared:  0.04824 
## F-statistic:  1551 on 2 and 61176 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Based on the above results which job types are associated with higher salaries?</p>
</div>
<div id="model-selection" class="section level2">
<h2><span class="header-section-number">15.5</span> Model selection</h2>
<p>We can use the validation set to see how well our model performs in predicting salary for people not in our training set. By comparing the prediction on the performance on several model alternatives, we can select the best prediction model.</p>
<div id="model-alternatives" class="section level3">
<h3><span class="header-section-number">15.5.1</span> Model alternatives</h3>
<p>In a real world situation you can test every possible linear combination of your variables on the right-hand side. Entirely different models (e.g., random forest regression) may be even better candidates, but for simplicity we’ll focus on a small set of linear models of salary.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">school_model &lt;-<span class="st"> </span><span class="kw">lm</span>(
  <span class="kw">log</span>(salary +<span class="st"> </span><span class="dv">1</span>) ~<span class="st"> </span>
<span class="st">    </span><span class="kw">I</span>(age -<span class="st"> </span><span class="dv">25</span>) +<span class="st"> </span><span class="kw">I</span>((age -<span class="st"> </span><span class="dv">25</span>)^<span class="dv">2</span>) +<span class="st"> </span>
<span class="st">    </span>years_since_degree +<span class="st"> </span>degree_type +<span class="st"> </span>r1 +<span class="st"> </span>field_of_study_group, 
  <span class="dt">data =</span> train
)
demo_model &lt;-<span class="st"> </span><span class="kw">lm</span>(
  <span class="kw">log</span>(salary +<span class="st"> </span><span class="dv">1</span>) ~<span class="st"> </span>
<span class="st">    </span><span class="kw">I</span>(age -<span class="st"> </span><span class="dv">25</span>) +<span class="st"> </span><span class="kw">I</span>((age -<span class="st"> </span><span class="dv">25</span>)^<span class="dv">2</span>) +<span class="st"> </span>
<span class="st">    </span>gender +<span class="st"> </span>race_ethnicity, 
  <span class="dt">data =</span> train
)
current_model &lt;-<span class="st"> </span><span class="kw">lm</span>(
  <span class="kw">log</span>(salary +<span class="st"> </span><span class="dv">1</span>) ~<span class="st"> </span>
<span class="st">    </span><span class="kw">I</span>(age -<span class="st"> </span><span class="dv">25</span>) +<span class="st"> </span><span class="kw">I</span>((age -<span class="st"> </span><span class="dv">25</span>)^<span class="dv">2</span>) +<span class="st"> </span>
<span class="st">    </span>in_school +<span class="st"> </span>work_activity, 
  <span class="dt">data =</span> train
)
kitchen_sink_model &lt;-<span class="st"> </span><span class="kw">lm</span>(
  <span class="kw">log</span>(salary +<span class="st"> </span><span class="dv">1</span>) ~<span class="st"> </span>
<span class="st">    </span><span class="kw">I</span>(age -<span class="st"> </span><span class="dv">25</span>) +<span class="st"> </span><span class="kw">I</span>((age -<span class="st"> </span><span class="dv">25</span>)^<span class="dv">2</span>) +<span class="st"> </span>
<span class="st">    </span>years_since_degree +<span class="st"> </span>degree_type +<span class="st"> </span>r1 +<span class="st"> </span>field_of_study_group +
<span class="st">    </span>gender +<span class="st"> </span>race_ethnicity +
<span class="st">    </span>in_school +<span class="st"> </span>work_activity, 
  <span class="dt">data =</span> train
)
<span class="kw">summary</span>(kitchen_sink_model)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = log(salary + 1) ~ I(age - 25) + I((age - 25)^2) + 
##     years_since_degree + degree_type + r1 + field_of_study_group + 
##     gender + race_ethnicity + in_school + work_activity, data = train)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.1766 -0.2493  0.0904  0.4007  3.7995 
## 
## Coefficients:
##                                                                             Estimate
## (Intercept)                                                                1.045e+01
## I(age - 25)                                                                4.247e-02
## I((age - 25)^2)                                                           -1.079e-03
## years_since_degree                                                         6.320e-03
## degree_typeMasters                                                         1.820e-01
## degree_typeDoctorate                                                       4.022e-01
## degree_typeProfessional                                                    5.404e-01
## r1TRUE                                                                     1.218e-01
## field_of_study_groupComputer and mathematical sciences                     2.001e-01
## field_of_study_groupEngineering                                            2.765e-01
## field_of_study_groupNon-S&amp;E                                                5.015e-02
## field_of_study_groupPhysical and related sciences                          1.205e-01
## field_of_study_groupS&amp;E-Related Fields                                     1.546e-01
## field_of_study_groupSocial and related sciences                           -5.138e-03
## genderM                                                                    2.548e-01
## race_ethnicityAmerican Indian/Alaska Native, non-Hispanic ONLY            -8.784e-02
## race_ethnicityBlack, non-Hispanic ONLY                                    -1.036e-01
## race_ethnicityHispanic, any race                                          -5.257e-02
## race_ethnicityWhite, non-Hispanic ONLY                                    -1.446e-03
## race_ethnicityNon-Hispanic Native Hawaiian/Other Pacific Islander ONLY     1.914e-02
## race_ethnicityMultiple Race                                               -3.697e-02
## in_schoolTRUE                                                             -3.933e-01
## work_activityBasic res.-study to gain sci. knwldg prima. for its own sake -3.138e-01
## work_activityApld. res.-study to gain sci. knwldg to meet recognized need -9.043e-02
## work_activityDev.-knowledge from res. for the prod. of materials, devices  2.250e-02
## work_activityDesign of equipment, processes, structures, models            4.853e-02
## work_activityComputer applications, programming, systems development       8.170e-02
## work_activityHuman Resources - inc. recruiting, personnel dev, training   -3.796e-02
## work_activityManaging or supervising people or projects                    1.370e-01
## work_activityProduction, operations, maintenance (e.g., chip production)  -2.304e-01
## work_activityProf. services (healthcare, fin. serv., legal serv., etc.)   -1.185e-01
## work_activitySales, purchasing, marketing                                 -2.724e-01
## work_activityQuality or productivity management                           -3.251e-02
## work_activityTeaching                                                     -5.217e-01
## work_activityOther work activity                                          -3.701e-01
##                                                                           Std. Error
## (Intercept)                                                                2.145e-02
## I(age - 25)                                                                9.697e-04
## I((age - 25)^2)                                                            2.103e-05
## years_since_degree                                                         5.523e-04
## degree_typeMasters                                                         7.426e-03
## degree_typeDoctorate                                                       1.347e-02
## degree_typeProfessional                                                    1.731e-02
## r1TRUE                                                                     6.809e-03
## field_of_study_groupComputer and mathematical sciences                     1.584e-02
## field_of_study_groupEngineering                                            1.325e-02
## field_of_study_groupNon-S&amp;E                                                1.276e-02
## field_of_study_groupPhysical and related sciences                          1.756e-02
## field_of_study_groupS&amp;E-Related Fields                                     1.411e-02
## field_of_study_groupSocial and related sciences                            1.342e-02
## genderM                                                                    6.732e-03
## race_ethnicityAmerican Indian/Alaska Native, non-Hispanic ONLY             4.758e-02
## race_ethnicityBlack, non-Hispanic ONLY                                     1.380e-02
## race_ethnicityHispanic, any race                                           1.247e-02
## race_ethnicityWhite, non-Hispanic ONLY                                     8.962e-03
## race_ethnicityNon-Hispanic Native Hawaiian/Other Pacific Islander ONLY     5.137e-02
## race_ethnicityMultiple Race                                                2.047e-02
## in_schoolTRUE                                                              1.313e-02
## work_activityBasic res.-study to gain sci. knwldg prima. for its own sake  2.359e-02
## work_activityApld. res.-study to gain sci. knwldg to meet recognized need  1.930e-02
## work_activityDev.-knowledge from res. for the prod. of materials, devices  2.085e-02
## work_activityDesign of equipment, processes, structures, models            1.990e-02
## work_activityComputer applications, programming, systems development       1.938e-02
## work_activityHuman Resources - inc. recruiting, personnel dev, training    2.898e-02
## work_activityManaging or supervising people or projects                    1.669e-02
## work_activityProduction, operations, maintenance (e.g., chip production)   2.180e-02
## work_activityProf. services (healthcare, fin. serv., legal serv., etc.)    1.718e-02
## work_activitySales, purchasing, marketing                                  1.863e-02
## work_activityQuality or productivity management                            2.345e-02
## work_activityTeaching                                                      1.745e-02
## work_activityOther work activity                                           1.980e-02
##                                                                           t value
## (Intercept)                                                               486.928
## I(age - 25)                                                                43.792
## I((age - 25)^2)                                                           -51.290
## years_since_degree                                                         11.444
## degree_typeMasters                                                         24.510
## degree_typeDoctorate                                                       29.866
## degree_typeProfessional                                                    31.216
## r1TRUE                                                                     17.883
## field_of_study_groupComputer and mathematical sciences                     12.633
## field_of_study_groupEngineering                                            20.867
## field_of_study_groupNon-S&amp;E                                                 3.931
## field_of_study_groupPhysical and related sciences                           6.864
## field_of_study_groupS&amp;E-Related Fields                                     10.956
## field_of_study_groupSocial and related sciences                            -0.383
## genderM                                                                    37.854
## race_ethnicityAmerican Indian/Alaska Native, non-Hispanic ONLY             -1.846
## race_ethnicityBlack, non-Hispanic ONLY                                     -7.506
## race_ethnicityHispanic, any race                                           -4.216
## race_ethnicityWhite, non-Hispanic ONLY                                     -0.161
## race_ethnicityNon-Hispanic Native Hawaiian/Other Pacific Islander ONLY      0.373
## race_ethnicityMultiple Race                                                -1.806
## in_schoolTRUE                                                             -29.966
## work_activityBasic res.-study to gain sci. knwldg prima. for its own sake -13.305
## work_activityApld. res.-study to gain sci. knwldg to meet recognized need  -4.686
## work_activityDev.-knowledge from res. for the prod. of materials, devices   1.079
## work_activityDesign of equipment, processes, structures, models             2.439
## work_activityComputer applications, programming, systems development        4.216
## work_activityHuman Resources - inc. recruiting, personnel dev, training    -1.310
## work_activityManaging or supervising people or projects                     8.209
## work_activityProduction, operations, maintenance (e.g., chip production)  -10.571
## work_activityProf. services (healthcare, fin. serv., legal serv., etc.)    -6.900
## work_activitySales, purchasing, marketing                                 -14.624
## work_activityQuality or productivity management                            -1.386
## work_activityTeaching                                                     -29.894
## work_activityOther work activity                                          -18.690
##                                                                           Pr(&gt;|t|)
## (Intercept)                                                                &lt; 2e-16
## I(age - 25)                                                                &lt; 2e-16
## I((age - 25)^2)                                                            &lt; 2e-16
## years_since_degree                                                         &lt; 2e-16
## degree_typeMasters                                                         &lt; 2e-16
## degree_typeDoctorate                                                       &lt; 2e-16
## degree_typeProfessional                                                    &lt; 2e-16
## r1TRUE                                                                     &lt; 2e-16
## field_of_study_groupComputer and mathematical sciences                     &lt; 2e-16
## field_of_study_groupEngineering                                            &lt; 2e-16
## field_of_study_groupNon-S&amp;E                                               8.46e-05
## field_of_study_groupPhysical and related sciences                         6.78e-12
## field_of_study_groupS&amp;E-Related Fields                                     &lt; 2e-16
## field_of_study_groupSocial and related sciences                             0.7019
## genderM                                                                    &lt; 2e-16
## race_ethnicityAmerican Indian/Alaska Native, non-Hispanic ONLY              0.0649
## race_ethnicityBlack, non-Hispanic ONLY                                    6.19e-14
## race_ethnicityHispanic, any race                                          2.50e-05
## race_ethnicityWhite, non-Hispanic ONLY                                      0.8718
## race_ethnicityNon-Hispanic Native Hawaiian/Other Pacific Islander ONLY      0.7094
## race_ethnicityMultiple Race                                                 0.0710
## in_schoolTRUE                                                              &lt; 2e-16
## work_activityBasic res.-study to gain sci. knwldg prima. for its own sake  &lt; 2e-16
## work_activityApld. res.-study to gain sci. knwldg to meet recognized need 2.80e-06
## work_activityDev.-knowledge from res. for the prod. of materials, devices   0.2806
## work_activityDesign of equipment, processes, structures, models             0.0147
## work_activityComputer applications, programming, systems development      2.49e-05
## work_activityHuman Resources - inc. recruiting, personnel dev, training     0.1903
## work_activityManaging or supervising people or projects                   2.28e-16
## work_activityProduction, operations, maintenance (e.g., chip production)   &lt; 2e-16
## work_activityProf. services (healthcare, fin. serv., legal serv., etc.)   5.26e-12
## work_activitySales, purchasing, marketing                                  &lt; 2e-16
## work_activityQuality or productivity management                             0.1657
## work_activityTeaching                                                      &lt; 2e-16
## work_activityOther work activity                                           &lt; 2e-16
##                                                                              
## (Intercept)                                                               ***
## I(age - 25)                                                               ***
## I((age - 25)^2)                                                           ***
## years_since_degree                                                        ***
## degree_typeMasters                                                        ***
## degree_typeDoctorate                                                      ***
## degree_typeProfessional                                                   ***
## r1TRUE                                                                    ***
## field_of_study_groupComputer and mathematical sciences                    ***
## field_of_study_groupEngineering                                           ***
## field_of_study_groupNon-S&amp;E                                               ***
## field_of_study_groupPhysical and related sciences                         ***
## field_of_study_groupS&amp;E-Related Fields                                    ***
## field_of_study_groupSocial and related sciences                              
## genderM                                                                   ***
## race_ethnicityAmerican Indian/Alaska Native, non-Hispanic ONLY            .  
## race_ethnicityBlack, non-Hispanic ONLY                                    ***
## race_ethnicityHispanic, any race                                          ***
## race_ethnicityWhite, non-Hispanic ONLY                                       
## race_ethnicityNon-Hispanic Native Hawaiian/Other Pacific Islander ONLY       
## race_ethnicityMultiple Race                                               .  
## in_schoolTRUE                                                             ***
## work_activityBasic res.-study to gain sci. knwldg prima. for its own sake ***
## work_activityApld. res.-study to gain sci. knwldg to meet recognized need ***
## work_activityDev.-knowledge from res. for the prod. of materials, devices    
## work_activityDesign of equipment, processes, structures, models           *  
## work_activityComputer applications, programming, systems development      ***
## work_activityHuman Resources - inc. recruiting, personnel dev, training      
## work_activityManaging or supervising people or projects                   ***
## work_activityProduction, operations, maintenance (e.g., chip production)  ***
## work_activityProf. services (healthcare, fin. serv., legal serv., etc.)   ***
## work_activitySales, purchasing, marketing                                 ***
## work_activityQuality or productivity management                              
## work_activityTeaching                                                     ***
## work_activityOther work activity                                          ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.7619 on 61144 degrees of freedom
## Multiple R-squared:  0.2317, Adjusted R-squared:  0.2313 
## F-statistic: 542.3 on 34 and 61144 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="comparing-model-performance" class="section level3">
<h3><span class="header-section-number">15.5.2</span> Comparing model performance</h3>
<p>Now we can compare the performance of each of these models against the validation dataset. Let’s walk step-by-step through the process of calculating the root mean squared prediction error (or RMSPE, or RMSE) with just the school prediction.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">school_prediction &lt;-<span class="st"> </span><span class="kw">predict</span>(school_model, validation)
salary_prediction &lt;-<span class="st"> </span><span class="kw">exp</span>(school_prediction) -<span class="st"> </span><span class="dv">1</span>
prediction_error &lt;-<span class="st"> </span>salary_prediction -<span class="st"> </span>validation$salary
school_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>(prediction_error^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
school_rmse</code></pre></div>
<pre><code>## [1] 92757.45</code></pre>
<p>Now let’s compare that to the RMSE for the other models.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">demo_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>((<span class="kw">exp</span>(<span class="kw">predict</span>(demo_model, validation)) -<span class="st"> </span><span class="dv">1</span> -<span class="st"> </span>validation$salary)^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
demo_rmse</code></pre></div>
<pre><code>## [1] 93801</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">current_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>((<span class="kw">exp</span>(<span class="kw">predict</span>(current_model, validation)) -<span class="st"> </span><span class="dv">1</span> -<span class="st"> </span>validation$salary)^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
current_rmse</code></pre></div>
<pre><code>## [1] 93275.49</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">kitchen_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>((<span class="kw">exp</span>(<span class="kw">predict</span>(kitchen_sink_model, validation)) -<span class="st"> </span><span class="dv">1</span> -<span class="st"> </span>validation$salary)^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
kitchen_rmse</code></pre></div>
<pre><code>## [1] 90500.08</code></pre>
<p>The <code>kitchen_model</code> outperforms the others (lowest RMSE) so we will use it in our final step. Keep in mind there are many alternative methods of modeling salary, so the above test should not be considered exhaustive.</p>
</div>
</div>
<div id="predictions-from-the-selected-model" class="section level2">
<h2><span class="header-section-number">15.6</span> Predictions from the selected model</h2>
<p>Finally, we can use our <code>test</code> dataset to evaluate the expected error for predictions from our chosen model. The only thing that changes relative to the <code>kitchen_rmse</code> we calculated above is swapping <code>validation</code> with <code>test</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">test_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>((<span class="kw">exp</span>(<span class="kw">predict</span>(kitchen_sink_model, test)) -<span class="st"> </span><span class="dv">1</span> -<span class="st"> </span>test$salary)^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
test_rmse</code></pre></div>
<pre><code>## [1] 87955.76</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">other_test_rmse &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="kw">mean</span>((<span class="kw">predict</span>(kitchen_sink_model, test) -<span class="st"> </span><span class="kw">log</span>(test$salary +<span class="st"> </span><span class="dv">1</span>))^<span class="dv">2</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))
other_test_rmse</code></pre></div>
<pre><code>## [1] 0.7556778</code></pre>
<p>What this number gives us is a typical error from our model predictions. The fact that this error is so large tells us that our model does a really poor job of predicting salary.</p>
</div>
<div id="assignment-14" class="section level2">
<h2><span class="header-section-number">15.7</span> Assignment</h2>
<p>Add variables on parental background, estimate an updated kitchen sink model including these new variables, and report the RMSE on the validation and test sets.</p>
<pre><code>N_ED_UG_FINAN_SUPP_GIFTS
W_DEM_PARENT_FATHERS_ED_LEVEL
W_DEM_PARENT_MOTHERS_ED_LEVEL</code></pre>
</div>
<div id="see-also" class="section level2">
<h2><span class="header-section-number">15.8</span> See also</h2>
<p>There are many approaches to model selection and a broad array of tools within R to help you along the way. Here’s a sampling:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/model-building.html" class="uri">http://r4ds.had.co.nz/model-building.html</a></li>
<li><a href="https://www.statmethods.net/stats/regression.html" class="uri">https://www.statmethods.net/stats/regression.html</a></li>
<li><a href="http://r-statistics.co/Model-Selection-in-R.html" class="uri">http://r-statistics.co/Model-Selection-in-R.html</a></li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="log.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="time-series.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jonpage/r-course/edit/master/15-cross-section.Rmd",
"text": "Edit"
},
"download": ["jonpage-r-course.pdf", "jonpage-r-course.epub"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
